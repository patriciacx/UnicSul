library(tidyverse)
library(dplyr)
library(tidyr)
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
getwd()
arquivo <- read.csv("tcc_dataset.csv", encoding="UTF-8")
delegacias <- read.csv("delegacias.csv", encoding="UTF-8", sep=';')
dados <- dados %>% spread(key='Natureza',value = 'Total')
dados <- arquivo[,c('delegacia_id', 'Natureza', 'Total')]
colnames(delegacias)[1] <- 'delegacia_id'
dados.join <- left_join(x= dados,
y=delegacias,
by='delegacia_id')
dados.join <- dados.join[,c(1,25,2:24)]
glimpse(dados.join)
## RETIRANDO VARIAVEIS DE TOTAIS
dim(dados.join)
dados.join[,24:25] <- NULL
head(dados.join[,16:18])
dados.join[,16:18] <- NULL
dim(dados.join)
glimpse(dados.join)
variaveis <- cbind(paste('X',1:19, sep =''),
colnames(dados.join)[3:20])
variaveis
head(dados.join[,16:18])
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
getwd()
arquivo <- read.csv("tcc_dataset.csv", encoding="UTF-8")
delegacias <- read.csv("delegacias.csv", encoding="UTF-8", sep=';')
dados <- arquivo[,c('delegacia_id', 'Natureza', 'Total')]
dados <- dados %>% spread(key='Natureza',value = 'Total')
colnames(delegacias)[1] <- 'delegacia_id'
dados.join <- left_join(x= dados,
y=delegacias,
by='delegacia_id')
dados.join
dados.join <- dados.join[,c(1,25,2:24)]
glimpse(dados.join)
## RETIRANDO VARIAVEIS DE TOTAIS
dim(dados.join)
dados.join[,24:25] <- NULL
head(dados.join[,16:18])
dados.join[,16:18] <- NULL
dim(dados.join)
glimpse(dados.join)
paste('X',1:19, sep ='')
colnames(dados.join)
variaveis <- cbind(paste('X',1:18, sep =''),
colnames(dados.join)[3:20])
variaveis
colnames(dados.join)[3:20] <- paste('X',1:20, sep ='')
colnames(dados.join)[3:20] <- paste('X',1:18, sep ='')
colnames(dados.join)
write.csv2(dados.join, 'base_boletins_tcc.csv',row.names=FALSE)
write.csv2(variaveis, 'variaveis.csv',row.names=FALSE)
library(tidyverse)
library(corrplot)
library(psych)
library(knitr)
setwd('C:/Users/Patricia/Google Drive/Cruzeiro/POS - TCC')
dados <- read.csv2('base_boletins_tcc.csv', sep=';')
glimpse(dados)
dados.scale <- scale(dados[,-c(1:2)]) %>% as.data.frame()
bartlett.test(dados)
bartlett.test(dados.scale)
#cor(dados.scale)
corrplot(cor(dados.scale), type="upper")
variaveis <- cbind(paste('X',1:18, sep =''),
colnames(dados.join)[3:20])
variaveis
colnames(dados.join)[3:20] <- paste('X',1:18, sep ='')
write.csv2(dados.join, 'base_boletins_tcc.csv',row.names=FALSE)
write.csv2(variaveis, 'variaveis.csv',row.names=FALSE)
View(dados.join)
setwd('C:/Users/Patricia/Google Drive/Cruzeiro/POS - TCC')
library(tidyverse)
library(corrplot)
library(psych)
library(knitr)
setwd('C:/Users/Patricia/Google Drive/Cruzeiro/POS - TCC')
dados <- read.csv2('base_boletins_tcc.csv', sep=';')
glimpse(dados)
getwd()
```{r}
setwd('C:/Users/Patricia/Documents/GitHub/UnicSul')
dados <- read.csv2('base_boletins_tcc.csv', sep=';')
glimpse(dados)
dados.scale <- scale(dados[,-c(1:2)]) %>% as.data.frame()
bartlett.test(dados)
bartlett.test(dados.scale)
#cor(dados.scale)
corrplot(cor(dados.scale), type="upper")
# Ajuste do modelo - escolha do numero de componentes
fit1 <- princomp(dados.scale, cor=TRUE)
summary(fit1)
# Scree Plot
plot(fit1, type="lines")
fit2 <- principal(dados.scale, covar = FALSE, nfactors = 4)
fit2
corrplot(t(fit2$loadings))
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
getwd()
arquivo <- read.csv("tcc_dataset.csv", encoding="UTF-8")
dados <- arquivo[,c('delegacia_id', 'Natureza', 'Total')]
delegacias <- read.csv("delegacias.csv", encoding="UTF-8", sep=';')
dados <- dados %>% spread(key='Natureza',value = 'Total')
colnames(delegacias)[1] <- 'delegacia_id'
dados.join <- left_join(x= dados,
y=delegacias,
by='delegacia_id')
dados.join <- dados.join[,c(1,25,2:24)]
glimpse(dados.join)
## RETIRANDO VARIAVEIS DE TOTAIS
dim(dados.join)
dados.join[,24:25] <- NULL
head(dados.join[,16:18])
dados.join[,16:18] <- NULL
dim(dados.join)
glimpse(dados.join)
variaveis <- cbind(paste('X',1:18, sep =''),
colnames(dados.join)[3:20])
variaveis
View(variaveis)
arquivo <- read.csv("tcc_dataset.csv", encoding="UTF-8")
delegacias <- read.csv("delegacias.csv", encoding="UTF-8", sep=';')
dados <- arquivo[,c('delegacia_id', 'Natureza', 'Total')]
dados <- dados %>% spread(key='Natureza',value = 'Total')
colnames(delegacias)[1] <- 'delegacia_id'
dados.join <- left_join(x= dados,
y=delegacias,
by='delegacia_id')
dados.join <- dados.join[,c(1,25,2:24)]
glimpse(dados.join)
glimpse(dados.join)
dados.join[,'HOMICÍDIO DOLOSO (2)']
dados.join[,'HOMICÍDIO DOLOSO POR ACIDENTE DE TRÂNSITO']
dados.join$HomicidioDolosoExcetoTransito <- dados.join[,'HOMICÍDIO DOLOSO (2)'] -
dados.join[,'HOMICÍDIO DOLOSO POR ACIDENTE DE TRÂNSITO']
glimpse(dados.join)
dados.join[,'HOMICÍDIO DOLOSO (2)'] <- NULL
dados.join[,'HOMICÍDIO DOLOSO POR ACIDENTE DE TRÂNSITO']<- NULL
## RETIRANDO VARIAVEIS DE TOTAIS
dim(dados.join)
## RETIRANDO VARIAVEIS DE TOTAIS
glimpse(dados.join)
dim(dados.join)
head(dados.join[,24:25])
head(dados.join[,24:25])
## RETIRANDO VARIAVEIS DE TOTAIS
glimpse(dados.join)
dim(dados.join)
head(dados.join[,22:23])
dados.join[,22:23] <- NULL
## RETIRANDO AS VARIÁVEIS DE NUMERO DE VÍTIMAS
glimpse(dados.join)
dim(dados.join)
head(dados.join[,14:16])
dados.join[,14:16] <- NULL
dim(dados.join)
glimpse(dados.join)
dim(dados.join)
colnames(dados.join)
arquivo <- read.csv("tcc_dataset.csv", encoding="UTF-8")
delegacias <- read.csv("delegacias.csv", encoding="UTF-8", sep=';')
dados <- arquivo[,c('delegacia_id', 'Natureza', 'Total')]
dados <- dados %>% spread(key='Natureza',value = 'Total')
colnames(delegacias)[1] <- 'delegacia_id'
dados.join <- left_join(x= dados,
y=delegacias,
by='delegacia_id')
dados.join <- dados.join[,c(1,25,2:24)]
glimpse(dados.join)
dados.join[,'HOMICÍDIO DOLOSO (2)']
dados.join[,'HOMICÍDIO DOLOSO POR ACIDENTE DE TRÂNSITO']
dados.join$HomicidioDolosoExcetoTransito <- dados.join[,'HOMICÍDIO DOLOSO (2)'] -
dados.join[,'HOMICÍDIO DOLOSO POR ACIDENTE DE TRÂNSITO']
dados.join[,'HOMICÍDIO DOLOSO (2)'] <- NULL
## RETIRANDO VARIAVEIS DE TOTAIS
glimpse(dados.join)
dim(dados.join)
## RETIRANDO VARIAVEIS DE TOTAIS
glimpse(dados.join)
head(dados.join[,22:23])
head(dados.join[,22:24])
head(dados.join[,22:24])
dados.join[,22:24] <- NULL
## RETIRANDO AS VARIÁVEIS DE NUMERO DE VÍTIMAS
glimpse(dados.join)
## RETIRANDO AS VARIÁVEIS DE NUMERO DE VÍTIMAS
glimpse(dados.join)
## RETIRANDO AS VARIÁVEIS DE NUMERO DE VÍTIMAS
dim(dados.join)
glimpse(dados.join)
head(dados.join[,15:17])
dados.join[,15:17] <- NULL
dim(dados.join)
glimpse(dados.join)
dim(dados.join)
variaveis <- cbind(paste('X',1:19, sep =''),
colnames(dados.join)[3:22])
colnames(dados.join)[3:22]
colnames(dados.join)
colnames(dados.join)[3:19]
variaveis <- cbind(paste('X',1:17, sep =''),
colnames(dados.join)[3:19])
variaveis
colnames(dados.join)[3:19] <- paste('X',1:19, sep ='')
colnames(dados.join)
variaveis
colnames(dados.join)[3:19]
paste('X',1:19, sep ='')
colnames(dados.join)
write.csv2(dados.join, 'base_boletins_tcc.csv',row.names=FALSE)
write.csv2(variaveis, 'variaveis.csv',row.names=FALSE)
